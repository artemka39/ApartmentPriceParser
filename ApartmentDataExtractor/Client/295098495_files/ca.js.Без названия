/*! For license information please see ca.js.LICENSE.txt */
(()=>{var e={418:e=>{"use strict";var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var o,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in o=Object(arguments[c]))r.call(o,u)&&(s[u]=o[u]);if(t){a=t(o);for(var p=0;p<a.length;p++)n.call(o,a[p])&&(s[a[p]]=o[a[p]])}}return s}},580:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CianAnalytics=void 0;var n=r(593),i=r(381),o=function(){function e(){var e=this;this.hasPageview=!1,this.queue=[],this.ca=function(t,r){e.hasPageview||"eventSite"!==t?(e.send(t,r),["pageview","pageviewSite"].includes(t)&&(e.hasPageview=!0,e.queue.length&&e.processQueue())):e.enqueue(t,r)},this.initializeConfig();for(var t=window.ca.q,r=0;r<t.length;r++){var n=t[r];this.ca(n[0],n[1])}window.ca=this.ca}return e.prototype.initializeConfig=function(){var e=document.currentScript||document.querySelector("[data-analytics-api-url]");if(!e)throw new Error;this.service=new i.Service,this.service.setConfig({soprApiUrl:e.getAttribute("data-analytics-api-url")||"",profileSessionKey:e.getAttribute("data-profile-session-key")||"",cianGK:(0,n.getCookie)("_CIAN_GK")||"",mobileUserId:(0,n.getCookie)("mobile_user_id")||void 0})},e.prototype.processQueue=function(){for(var e=0;e<this.queue.length;e++){var t=this.queue[e];this.send(t[0],t[1])}this.queue=[]},e.prototype.enqueue=function(e,t){this.queue.push([e,t])},e.prototype.send=function(e,t){this.service.config.apiUrl&&(this.service[e]?this.service[e](t):this.service.logger.addMessage('Error: event type - "'.concat(e,'" not found'),t))},e}();t.CianAnalytics=o},295:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var r=function(){function e(){this.isActive=!1,this.logStack=[]}return e.prototype.addEvent=function(e){this.logStack.push(e),this.isActive&&console.log("CIAN analytics send",e)},e.prototype.addMessage=function(e,t){console.warn(e,t)},e.prototype.start=function(){this.isActive=!0,this.logStack.forEach((function(e){console.log('CA "'.concat(e.sopr.t,'": '),e)}))},e}();t.Logger=r},381:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.Service=void 0;var i=r(295),o=r(33),a=r(712),s=r(633),c=r(593),u=r(103),p=function(){function e(){this.logger=new i.Logger}return e.prototype.user=function(e){this.config.setUser(e)},e.prototype.page=function(e){this.config.setPage(e)},e.prototype.sc=function(e){this.config.setSc(e)},e.prototype.partner=function(e){this.config.setPartner(e)},e.prototype.products=function(e){this.config.setProducts(e)},e.prototype.teaser=function(e){(0,u.sendTeaser)({config:this.config,data:e})},e.prototype.eventSite=function(e){var t=Object.assign({event:"oldevent"},e);(0,u.collect)({eventData:t,config:this.config,isNewpage:!1})},e.prototype.pageviewSite=function(e){this.pageview(e)},e.prototype.event=function(e){this.send(new s.SoprEvent(e,this.config))},e.prototype.pageview=function(e){(0,u.collect)({eventData:e,config:this.config,isNewpage:!0})},e.prototype.eventEnrich=function(e){(0,u.collect)({eventData:e,config:this.config,isNewpage:!1,withEnrich:!0})},e.prototype.eventEbc=function(e){var t=Object.assign({event:"oldevent"},e);(0,u.collect)({eventData:t,config:this.config,isNewpage:!1,withEnrich:!0})},e.prototype.pageviewEbc=function(e){var t=Object.assign({category:"page",action:"newpage",label:"open",event:"newpage"},e);(0,u.collect)({eventData:t,config:this.config,isNewpage:!0})},e.prototype.sendGA=function(e,t){var r=window,i=Object.assign(e.getDataLayerParams(),t),o=(i.ea,i.ec,i.el,i.name,i.dl,n(i,["ea","ec","el","name","dl"]));r.dataLayer?setTimeout((function(){r.dataLayer.push(o)}),0):r.dataLayer=[{"gtm.start":(new Date).getTime(),event:"gtm.js"},o]},e.prototype.setConfig=function(e){var t=e.cianGK,r=e.profileSessionKey,n=e.soprApiUrl,i=e.mobileUserId;this.config=new a.Config({cianGK:t,profileSessionKey:r,soprApiUrl:n,mobileUserId:i})},e.prototype.log=function(){this.logger.start()},e.prototype.send=function(e){var t=window,r=(0,c.getSoprApi)("old"),n={apiUrl:r.apiUrl,path:r.path,dataToSopr:e.getSoprParams(),contentType:"application/x-www-form-urlencoded"};(0,o.SoprAPI)(n).catch((function(){console.warn("Error while sending metrics to SOPR")})),t.dataLayer?setTimeout((function(){t.dataLayer.push(e.getDataLayerParams())}),0):t.dataLayer=[{"gtm.start":(new Date).getTime(),event:"gtm.js"},e.getDataLayerParams()],this.logger.addEvent(e)},e}();t.Service=p},33:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SoprAPI=void 0,t.SoprAPI=function(e){var t=new XMLHttpRequest,r=e.apiUrl,n=e.dataToSopr,i=e.contentType,o=e.path;return new Promise((function(e,a){t.onreadystatechange=function(){4===t.readyState&&(200===t.status||204===t.status?e():a())},t.withCredentials=!0,t.open("POST","".concat(r).concat(o,"/")),t.setRequestHeader("Content-Type",i),t.send(n)}))}},712:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var i=r(593);var o=function(){function e(e){this.getUtmData=function(){var e=location.search.replace("?","").split("&"),t={utm_campaign:void 0,utm_content:void 0,utm_term:void 0,utm_medium:void 0,utm_source:void 0};return e.forEach((function(e){var r=e.split("=");r[0]in t&&(t[r[0]]=r[1])})),t};var t=e.soprApiUrl,r=e.profileSessionKey,n=e.cianGK,i=e.mobileUserId;this.apiUrl=t,this.profileSessionKey=r,this.cianGK=n,this.mobileUserId=i}return e.prototype.setUser=function(e){this.user=e},e.prototype.setPage=function(e){var t="phone"===e.siteType?"mobile":e.siteType;this.page=n(n({},e),{siteType:t})},e.prototype.setPartner=function(e){this.partner=e},e.prototype.setProducts=function(e){this.products=e},e.prototype.setSc=function(e){this.sc=e},e.prototype.update=function(e){var t=e.user,r=e.partner,n=e.page,i=e.products,o=e.sc;this.user=t||this.user,this.partner=r||this.partner,this.page=n||this.page,this.products=i||this.products,this.sc=o||this.sc},e.prototype.getSoprData=function(e,t){void 0===t&&(t=!0);var r=this.getUtmData(),n={t:e,v:"1",cid:this.cianGK||"noid",dl:encodeURIComponent(document.location.href),rid:this.profileSessionKey,ua:encodeURIComponent(navigator.userAgent),mobileUserId:this.mobileUserId};if(t){var o={};Object.keys(r).forEach((function(e){var t,n=e.replace("utm_","");Object.assign(o,((t={})[n]=r[e],t))})),Object.assign(n,{utm:o})}var a=this.user&&function(e){var t=(0,i.isObjContainsKey)(e,"userID")?e.userID:e.userId;return t?String(t):null}(this.user);if(a&&Object.assign(n,{uid:a}),this.page){var s=(0,i.isObjContainsKey)(this.page,"offerVAS")?this.page.offerVAS:void 0,c=(0,i.isObjContainsKey)(this.page,"dealType")?this.page.dealType:void 0,u=(0,i.isObjContainsKey)(this.page,"objectType")?this.page.objectType:void 0;n.pt=this.page.pageType.toLowerCase(),n.ds=this.page.siteType,n.deal_type=c,n.object_type=u,n.vas=s,n.oid=this.page.offerID}for(var p in this.collectUtm(n),n)n[p]||delete n[p];return n},e.prototype.collectUtm=function(e){var t=this.getUtmData();t.utm_campaign&&(e.ci=t.utm_campaign,e.cs=t.utm_source,e.cm=t.utm_medium,e.ck=t.utm_term,e.cc=t.utm_content)},e}();t.Config=o},633:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.SoprEvent=void 0;var i=r(877),o=r(418),a=function(){function e(e,t,r,n){this.getRightSoprKey=function(e){var t={category:"ec",eventCategory:"ec",action:"ea",eventAction:"ea",label:"el",eventLabel:"el",value:"ev",eventValue:"ev",hitType:"t",searchConditions:"sc",searchResults:"sr"};return t[e]?t[e]:e},this.replaceEventKeys=function(e){return{name:"event",category:"eventCategory",label:"eventLabel",action:"eventAction"}[e]||e},this.getUser=function(e,t){if(e.user)return e.user;if(t&&t.user){var r=t.user,n=r.abGroup,i=r.userId;return{abGroup:n,userId:i,isAuthorized:Boolean(i)}}},this.getPage=function(e,t){if(e.page)return e.page;if(t&&t.page){var r=t.page;return{listingType:r.listingType,sortType:r.sortType,pageNumber:r.pageNumber,block:r.block,breadCrumbs:r.breadCrumbs,offerType:r.offerType,offerID:r.offerID,queryString:r.queryString,pageType:r.pageType,siteType:r.siteType,offersQty:r.offersQty}}},this.data=e,this.data.join_id=i.v4(),this.custom=r,this.sopr=t.getSoprData("event",n)}return e.prototype.getSoprParams=function(){var e=this,t=[],r=this.sopr,i=(r.utm,n(r,["utm"]));Object.keys(i).forEach((function(e){t.push("".concat(e,"=").concat(encodeURIComponent(String(i[e]))))}));var a=this.data;return this.custom&&(a=o(this.custom,this.data)),Object.keys(a).forEach((function(r){var n=a[r];"object"==typeof n&&(n=JSON.stringify(n)),t.push("".concat(e.getRightSoprKey(r),"=").concat(encodeURIComponent(n)))})),t.push("referrer=".concat(encodeURIComponent(document.referrer))),this.query=t,t.join("&")},e.prototype.getDataLayerParams=function(){var e=this;return Object.keys(this.data).reduce((function(t,r){return t[e.replaceEventKeys(r)]=e.data[r],t}),{})},e}();t.SoprEvent=a},986:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.collect=void 0;var a=r(161),s=r(98),c=r(761),u=r(955),p=r(143),l=r(349),d=r(367),f=r(759),g=r(382),v=r(35),y=r(707),h=r(77),b=r(388),m=r(234),w=r(936),O={category:"page",action:"newpage",label:"open",event:"newpage",value:""};t.collect=function(e){return i(void 0,void 0,void 0,(function(){var t,r,i,_,j,S,P,T,A,C,I,E,U,D,x,M,N,k,L,G,K,R,q,F,H,B,J,V;return o(this,(function(o){try{if(t=e.eventData,r=e.config,i=e.isNewpage,_=e.withEnrich,j=i||_,t){if(i&&r.update({user:t.user,partner:t.partner,page:t.page,products:t.products,sc:t.sc||t.searchConditions}),S=n(n({},t),i?O:{}),P=Object.keys(S).reduce((function(e,t){return e[(0,d.getRightSoprKey)(t)]=S[t],e}),{}),T=n(n({},P),(0,g.getSoprExtendedData)({eventType:i?"pageview":"event",cid:r.cianGK,rid:r.profileSessionKey})),C=(A=T).t,I=A.v,E=A.cid,U=A.dl,D=A.rid,x=A.ua,M=A.ec,N=A.ea,k=A.el,L=A.sc,G=A.event,K=A.referrer,R=A.join_id,q=A.modelVersion,F=A.user,H=A.page,B=(0,l.getProducts)(r,T),J=(0,w.getJsonQuery)(r,L,i),(V=n({t:C,v:I,cid:E,dl:U,rid:D,ua:x,ec:M,ea:N,el:k,event:G,referrer:K,join_id:R,modelVersion:q,mobileUserId:r.mobileUserId,user:(0,y.getUser)(r,F,i),page:(0,a.filterPage)((0,p.getPage)(r,H,i),j),products:B&&B.map((function(e){var t=e.offerType;return t||(t=e.objectType||H&&H.objectType),{id:e.id,offerType:t&&(0,u.getOfferType)(t),position:e.position,extra:e.extra}}))},J&&{sc:J})).page=(0,v.getUpdatedPageForTestEvent)(V.page),(0,b.SoprAPI)(n({data:JSON.stringify(n(n({},V),{page:(0,a.filterPage)(V.page,!1)}))},(0,f.getSoprApi)("newbec"))).catch((function(e){return console.warn("Error while sending metrics to SOPR")})),j)return(0,h.EbcAPI)(n({data:JSON.stringify(V)},(0,s.getEbcApi)("event-enrichment"))).then((function(e){return(0,m.sendGA)((0,c.getGAObject)(e))})).catch((function(){return(0,m.sendGA)((0,c.getGAObject)(V))})),[2];(0,m.sendGA)((0,c.getGAObject)(V))}}catch(t){(0,b.SoprAPI)(n({data:JSON.stringify(e.eventData)},(0,f.getSoprApi)("mobile-dev"))).catch((function(){return console.warn("Error while sending metrics to SOPR")}))}return[2]}))}))}},103:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(986),t),i(r(705),t)},705:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.sendTeaser=void 0;var i=r(877),o=r(238),a=r(553),s=r(388),c=r(759);t.sendTeaser=function(e){var t=e.config,r=e.data,u=r.product,p=r.user||t.user,l=r.page||t.page,d=r.sc||t.sc,f={user:p?(0,o.deleteEmptyFields)((0,a.normalizeUserData)(p)):void 0,page:l?(0,o.deleteEmptyFields)(l):void 0,product:u,sc:d,cid:t.cianGK,dl:encodeURIComponent(document.location.href),join_id:i.v4(),referrer:document.referrer,rid:t.profileSessionKey,ua:encodeURIComponent(navigator.userAgent),viewport:{width:window.innerWidth,height:window.innerHeight}};(0,s.SoprAPI)(n({data:JSON.stringify(f)},(0,c.getSoprApi)("v2/teaser-web",!0))).catch((function(){return console.warn("Failed send sopr/v2/teaser event")}))}},41:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateDomainByHost=void 0;var r=[["cian.ru",/cian\.ru$/i],["cian.ru",/^localhost(:\d+)?$/i],["cian.ru",/^127\.0\.0\.1(:\d+)?$/i],["cre.space",/cre\.space$/i]];t.calculateDomainByHost=function(e){for(var t=0,n=r;t<n.length;t++){var i=n[t];if(i[1].test(e))return i[0]}return"unknown"}},790:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateEnvironmentByHost=void 0;var r=[["beta",/stage(\.cian\.ru|\.cre\.space)$/i],["development",/dev[2,3]?(\.cian\.ru|\.cre\.space)$/i],["local",/local(\.map)?\.cian\.ru$/i],["local",/^localhost(:\d+)?$/i],["local",/^127\.0\.0\.1(:\d+)?$/i],["production",/(cian\.ru|cre\.space)$/i]];t.calculateEnvironmentByHost=function(e){for(var t=0,n=r;t<n.length;t++){var i=n[t];if(i[1].test(e))return i[0]}return"unknown"}},238:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteEmptyFields=void 0,t.deleteEmptyFields=function(e){var t=JSON.parse(JSON.stringify(e));return Object.keys(t).forEach((function(e){null===t[e]&&delete t[e]})),t}},161:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.filterPage=t.LISTING_DEMAND=t.LISTING_FINANCE=t.CARD=t.LISTING=void 0,t.LISTING=["Listing","ListingKP","ListingJK","ListingBC","ListingTC","ListingWC","ListingFavorites"],t.CARD=["Card","CardKP","CardBC","CardTC","CardWC","CardJK","CardAgent","CardFinance","CardDemand"],t.LISTING_FINANCE="ListingFinance",t.LISTING_DEMAND="ListingDemand",t.filterPage=function(e,n){void 0===n&&(n=!1);var i=e.pageType;if(i){if(t.LISTING.includes(i))return{listingType:e.listingType,pageNumber:e.pageNumber,queryString:e.queryString,offersQty:e.offersQty,siteType:o=e.siteType,extra:a=e.extra,mlRankingGuid:e.mlRankingGuid,mlRankingModelVersion:e.mlRankingModelVersion,searchGuid:e.searchGuid,pageType:i};if(t.CARD.includes(i)){var o=e.siteType,a=e.extra,s=e.offerID,c=e.offerType;return n?{pageType:i,siteType:o,extra:a,offerID:s,offerType:c}:{pageType:i,siteType:o,extra:a}}if(i===t.LISTING_FINANCE)return{listingType:e.listingType,pageNumber:e.pageNumber,queryString:e.queryString,siteType:o=e.siteType,extra:a=e.extra,pageType:i};if(i===t.LISTING_DEMAND)return{siteType:o=e.siteType,pageNumber:e.pageNumber,extra:a=e.extra,pageType:i}}return r(r({},e),{siteType:"phone"===e.siteType?"mobile":e.siteType})}},98:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEbcApi=void 0;var n=r(593),i=r(790);t.getEbcApi=function(e){var t;switch((0,i.calculateEnvironmentByHost)(window.location.host)){case"development":t="http://master.ebc-analytics.dev3.cian.ru/";break;case"beta":t="https://beta".concat((0,n.getStageId)(window.location.host),".ebc-analytics.stage.cian.ru/");break;default:t="https://api.cian.ru/ebc-analytics/"}return{apiUrl:t,path:e}}},761:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGAObject=void 0;var n=r(206);t.getGAObject=function(e){return Object.keys(e).reduce((function(t,r){return e[r]&&(t[(0,n.replaceKeysForGA)(r)]=e[r]),t}),{})}},936:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getJsonQuery=void 0;var i=r(238);t.getJsonQuery=function(e,t,r){var o={};return r&&(o=(0,i.deleteEmptyFields)(n({},t))),!r&&t&&(o=(0,i.deleteEmptyFields)(n({},t))),r||t||(o=(0,i.deleteEmptyFields)(n({},null==e?void 0:e.sc))),Object.keys(o).length?o:null}},955:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOfferType=void 0;var r=["flat_old","flat_new","flat_new_dev","flat_old,flat_new","commercial","suburban","suburban_dev"];t.getOfferType=function(e){return r.includes(e)?"offer":e}},143:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getPage=void 0;var i=r(238);t.getPage=function(e,t,r){return r?(0,i.deleteEmptyFields)(n({},t)):(0,i.deleteEmptyFields)(n(n({},null==e?void 0:e.page),t))}},349:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProducts=void 0,t.getProducts=function(e,t){return!0===t.useLastProducts?e.products:t.products}},367:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRightSoprKey=void 0,t.getRightSoprKey=function(e){var t={category:"ec",eventCategory:"ec",action:"ea",eventAction:"ea",label:"el",eventLabel:"el",value:"ev",eventValue:"ev",hitType:"t",searchConditions:"sc",searchResults:"sr"};return t[e]?t[e]:e}},759:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSoprApi=t.calcSoprApi=void 0;var n=r(0),i=r(41),o=r(790);function a(e){switch(e){case"development":return"http://master.sopr.dev3.cian.ru/";case"beta":return"https://beta".concat((0,n.getStageId)(window.location.host),".sopr.stage.cian.ru/");default:return"https://sopr-api.cian.ru/"}}function s(e){switch(e){case"development":return"http://master.sopr-api.dev3.cre.space/";case"beta":return"https://beta".concat((0,n.getStageId)(window.location.host),".sopr-api.stage.cre.space/");default:return"https://sopr-api.cre.space/"}}function c(e){switch(e){case"development":return"http://master.sopr-experiments-api.dev3.cian.ru/";case"beta":return"https://api.beta".concat((0,n.getStageId)(window.location.host),".stage.cian.ru/sopr-experiments/");default:return"https://api.cian.ru/sopr-experiments/"}}function u(e){var t=e.env,r=e.host,n=e.path;return e.isTeaser?{apiUrl:c(t),path:n}:"cian.ru"===r?{apiUrl:a(t),path:n}:"cre.space"===r?{apiUrl:s(t),path:n}:{apiUrl:"https://sopr-api.cian.ru/",path:n}}t.calcSoprApi=u,t.getSoprApi=function(e,t){return u({env:(0,o.calculateEnvironmentByHost)(window.location.host),host:(0,i.calculateDomainByHost)(window.location.host),path:e,isTeaser:t})}},382:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSoprExtendedData=void 0;var n=r(877);t.getSoprExtendedData=function(e){var t=e.eventType,r=e.cid,i=e.rid;return{t,v:"1",cid:r||"noid",dl:encodeURIComponent(document.location.href),rid:i,ua:encodeURIComponent(navigator.userAgent),referrer:document.referrer,join_id:n.v4()}}},0:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStageId=void 0,t.getStageId=function(e){var t=e.split(".").find((function(e){return e.indexOf("beta")>=0})),r=t?t.replace(/\D+/gi,""):1;return String(r)}},35:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdatedPageForTestEvent=void 0;var i=r(593);t.getUpdatedPageForTestEvent=function(e){if((0,i.getCookie)("QA-TestMode")){if(e){var t=e.extra;return n(n({},e),{extra:n(n({},t),{isTest:1})})}return{extra:{isTest:1}}}return e}},707:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getUser=void 0;var i=r(238),o=r(553);t.getUser=function(e,t,r){if(r){var a=(0,i.deleteEmptyFields)((0,o.normalizeUserData)(n({},t)));return Object.keys(a).length?a:{}}var s=(0,i.deleteEmptyFields)((0,o.normalizeUserData)(n(n({},null==e?void 0:e.user),t)));return Object.keys(s).length?s:{}}},553:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeUserData=void 0,t.normalizeUserData=function(e){return{userId:"userID"in e?e.userID:e.userId,extra:e.extra}}},206:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replaceKeysForGA=void 0,t.replaceKeysForGA=function(e){return{name:"event",ec:"eventCategory",el:"eventLabel",ea:"eventAction"}[e]||e}},77:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EbcAPI=void 0,t.EbcAPI=function(e){var t=new XMLHttpRequest,r=e.apiUrl,n=e.data,i=e.path;return new Promise((function(e,o){t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status||204===t.status){204===t.status&&e({});try{e(JSON.parse(t.responseText))}catch(e){o()}}else o()},t.withCredentials=!0,t.open("POST","".concat(r).concat(i,"/")),t.setRequestHeader("Content-Type","application/json"),t.send(n)}))}},388:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SoprAPI=void 0,t.SoprAPI=function(e){var t=new XMLHttpRequest,r=e.apiUrl,n=e.data,i=e.path;return new Promise((function(e,o){t.onreadystatechange=function(){4===t.readyState&&(200===t.status||204===t.status?e():o())},t.withCredentials=!0,t.open("POST","".concat(r).concat(i,"/")),t.setRequestHeader("Content-Type","application/json"),t.send(n)}))}},234:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendGA=void 0,t.sendGA=function(e){var t=window;t.dataLayer?setTimeout((function(){t.dataLayer.push(e)}),0):t.dataLayer=[{"gtm.start":(new Date).getTime(),event:"gtm.js"},e]}},593:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStageId=t.getSoprApi=t.getEbcApi=t.getSoprPath=t.isObjContainsKey=t.getCookie=void 0;var n=r(790);function i(e){switch(e){case"ebc":return"ebec";case"old":default:return"collect";case"new":return"site"}}function o(e){var t=e.split(".").find((function(e){return e.indexOf("beta")>=0})),r=t?t.replace(/\D+/gi,""):1;return String(r)}t.getCookie=function(e){var t=document.cookie.split(";"),r="";return t.forEach((function(t){t.split("=")[0].trim()===e&&(r=t)})),r?r.split("=")[1]:null},t.isObjContainsKey=function(e,t){return t in e},t.getSoprPath=i,t.getEbcApi=function(){var e;switch((0,n.calculateEnvironmentByHost)(window.location.host)){case"development":e="http://master.ebc-analytics.dev3.cian.ru/";break;case"beta":e="https://beta".concat(o(window.location.host),".ebc-analytics.stage.cian.ru/");break;default:e="https://api.cian.ru/ebc-analytics/"}return{apiUrl:e,path:"ebec"}},t.getSoprApi=function(e){var t=(0,n.calculateEnvironmentByHost)(window.location.host),r={apiUrl:"https://sopr-api.cian.ru/",path:i(e)};if("development"===t)return Object.assign(r,{apiUrl:"http://master.sopr.dev3.cian.ru/"});if("beta"===t){var a=o(window.location.host);return Object.assign(r,{apiUrl:"https://beta".concat(a,".sopr.stage.cian.ru/")})}return r},t.getStageId=o},877:(e,t,r)=>{var n=r(570),i=r(171),o=i;o.v1=n,o.v4=i,e.exports=o},327:e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,i=t;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},570:(e,t,r)=>{var n,i,o=r(217),a=r(327),s=0,c=0;e.exports=function(e,t,r){var u=t&&r||0,p=t||[],l=(e=e||{}).node||n,d=void 0!==e.clockseq?e.clockseq:i;if(null==l||null==d){var f=o();null==l&&(l=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==d&&(d=i=16383&(f[6]<<8|f[7]))}var g=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:c+1,y=g-s+(v-c)/1e4;if(y<0&&void 0===e.clockseq&&(d=d+1&16383),(y<0||g>s)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=g,c=v,i=d;var h=(1e4*(268435455&(g+=122192928e5))+v)%4294967296;p[u++]=h>>>24&255,p[u++]=h>>>16&255,p[u++]=h>>>8&255,p[u++]=255&h;var b=g/4294967296*1e4&268435455;p[u++]=b>>>8&255,p[u++]=255&b,p[u++]=b>>>24&15|16,p[u++]=b>>>16&255,p[u++]=d>>>8|128,p[u++]=255&d;for(var m=0;m<6;++m)p[u+m]=l[m];return t||a(p)}},171:(e,t,r)=>{var n=r(217),i=r(327);e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(()=>{"use strict";var e=r(580);window.CianAnalytics=new e.CianAnalytics})()})();
//# sourceMappingURL=ca.js.map