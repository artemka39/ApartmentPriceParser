/*! For license information please see mf-registry.v1.js.LICENSE.txt */
!function(){var t={242:function(t,e,r){var n=r(506).default;function i(){"use strict";t.exports=i=function(){return r},t.exports.__esModule=!0,t.exports.default=t.exports;var e,r={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(t,e,r){t[e]=r.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",f=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(e){h=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var i=e&&e.prototype instanceof w?e:w,o=Object.create(i.prototype),a=new I(n||[]);return s(o,"_invoke",{value:A(t,r,a)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=p;var m="suspendedStart",y="suspendedYield",v="executing",g="completed",b={};function w(){}function k(){}function x(){}var O={};h(O,c,(function(){return this}));var E=Object.getPrototypeOf,j=E&&E(E(B([])));j&&j!==o&&a.call(j,c)&&(O=j);var S=x.prototype=w.prototype=Object.create(O);function L(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(i,o,s,u){var c=d(t[i],t,o);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==n(l)&&a.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,s,u)}),(function(t){r("throw",t,s,u)})):e.resolve(l).then((function(t){f.value=t,s(f)}),(function(t){return r("throw",t,s,u)}))}u(c.arg)}var i;s(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var i=m;return function(o,a){if(i===v)throw new Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:e,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=P(s,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===m)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=v;var c=d(t,r,n);if("normal"===c.type){if(i=n.done?g:y,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=g,n.method="throw",n.arg=c.arg)}}}function P(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=d(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function B(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(a.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(n(t)+" is not iterable")}return k.prototype=x,s(S,"constructor",{value:x,configurable:!0}),s(x,"constructor",{value:k,configurable:!0}),k.displayName=h(x,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,h(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},r.awrap=function(t){return{__await:t}},L(_.prototype),h(_.prototype,f,(function(){return this})),r.AsyncIterator=_,r.async=function(t,e,n,i,o){void 0===o&&(o=Promise);var a=new _(p(t,e,n,i),o);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(S),h(S,l,"Generator"),h(S,c,(function(){return this})),h(S,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=B,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(F),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),F(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;F(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:B(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},r}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},506:function(t){function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},814:function(t,e,r){var n=r(242)();t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";var t=r(814),e=r.n(t);class n extends Error{details={};type;domain;constructor({message:t,type:e,domain:r,details:i}){super(t),Object.setPrototypeOf(this,n.prototype),this.type=e,this.domain=r,this.name=e,i&&(this.details=i),Error.captureStackTrace?Error.captureStackTrace(this,n):this.stack=(new Error).stack}printDetails(){return JSON.stringify(this.details,null,2)}toJSON(){return{type:this.type,domain:this.domain,message:this.message,details:this.details}}}class i extends n{constructor({message:t,domain:e,details:r}){super({type:"ConfigurationError",message:t,domain:e,details:r}),Object.setPrototypeOf(this,i.prototype),Error.captureStackTrace?Error.captureStackTrace(this,i):this.stack=(new Error).stack}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===a(e)?e:String(e)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t,e,r){return(e=s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function d(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}function y(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function v(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){y(o,n,i,a,s,"next",t)}function s(t){y(o,n,i,a,s,"throw",t)}a(void 0)}))}}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=m(t);if(e){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}var b=function(t){return t[t.Initial=0]="Initial",t[t.Loading=1]="Loading",t[t.Loaded=2]="Loaded",t[t.Failed=3]="Failed",t}({}),w=function(){function t(){o(this,t),f(this,"loadListeners",[]),f(this,"errorListeners",[]),f(this,"eventTarget",document.createElement("span"))}var r,n,i;return c(t,[{key:"status",get:function(){return this._status}},{key:"load",value:(i=v(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._status!==b.Loaded){t.next=2;break}return t.abrupt("return");case 2:if(this._status!==b.Loading){t.next=4;break}return t.abrupt("return",this.inQueue());case 4:return this.emitLoading(),this.process(),t.abrupt("return",this.inQueue());case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"emitLoading",value:(n=v(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._status=b.Loading;case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"emitLoad",value:function(t){this._status===b.Loading&&(this._status=b.Loaded,this.exports=t,this.cleanQueue())}},{key:"emitError",value:function(t){this._status===b.Loading&&(this._status=b.Failed,this.cleanQueue(t))}},{key:"process",value:(r=v(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=this,t.next=4,this.loadSource();case 4:t.t1=t.sent,t.t0.emitLoad.call(t.t0,t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),this.emitError(t.t2);case 11:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(){return r.apply(this,arguments)})},{key:"cleanQueue",value:function(t){var e=this;this.timer&&(clearTimeout(this.timer),this.timer=void 0),t?this.eventTarget.dispatchEvent(new CustomEvent("error",{detail:t})):this.eventTarget.dispatchEvent(new CustomEvent("load")),this.loadListeners.forEach((function(t){return e.eventTarget.removeEventListener("load",t)})),this.loadListeners=[],this.errorListeners.forEach((function(t){return e.eventTarget.removeEventListener("error",t)})),this.errorListeners=[]}},{key:"inQueue",value:function(){var t=this;return new Promise((function(e,r){var n=function(t){return r(t.detail)};t.loadListeners.push(e),t.errorListeners.push(n),t.eventTarget.addEventListener("load",e),t.eventTarget.addEventListener("error",n)}))}}]),t}(),k=function(t){p(r,t);var e=g(r);function r(t,n,i){var a;return o(this,r),f(l(a=e.call(this)),"exports",void 0),a.asset=t,a.assetLoader=n,a.loadTimeout=i,a}return c(r,[{key:"type",get:function(){return this.asset.type}},{key:"contentType",get:function(){return this.asset.contentType}},{key:"src",get:function(){return this.asset.src}},{key:"props",get:function(){return this.asset.props}},{key:"loadSource",value:function(){return this.assetLoader.import(this,this.loadTimeout)}}]),r}(w),x=function(t){p(i,t);var r,n=g(i);function i(t,e,r){var a;return o(this,i),(a=n.call(this)).asset=t,a.assetLoader=e,a.loadTimeout=r,a}return c(i,[{key:"type",get:function(){return this.asset.type}},{key:"contentType",get:function(){return this.asset.contentType}},{key:"src",get:function(){return this.asset.src}},{key:"props",get:function(){return this.asset.props}},{key:"hasExports",get:function(){return this.asset.hasExports}},{key:"loadSource",value:(r=v(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.assetLoader.import(this,this.loadTimeout));case 1:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}]),i}(w),O=function(){function t(e,r){o(this,t),this.asset=e,this.assetLoader=r}return c(t,[{key:"type",get:function(){return this.asset.type}},{key:"contentType",get:function(){return this.asset.contentType}},{key:"content",get:function(){return this.asset.content}},{key:"hash",get:function(){return this.asset.hash}},{key:"load",value:function(){this.assetLoader.importInline(this)}}]),t}(),E=function(t){return t[t.Script=0]="Script",t[t.Styles=1]="Styles",t}({}),j=function(t){return t[t.File=0]="File",t[t.Inline=1]="Inline",t}({});function S(t){return t.type===j.File&&"hasExports"in t}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _=function(){function t(e,r){if(o(this,t),f(this,"storage",new Map),f(this,"inlineStorage",new Map),this.domLoader=e,r){var n,i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return L(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(r);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=this.createAssetByManifest(a);s.type===j.File&&s.emitLoading()}}catch(t){i.e(t)}finally{i.f()}}}return c(t,[{key:"getAsset",value:function(t){return this.storage.get(t)}},{key:"createAssetByManifest",value:function(t){return t.type===j.Inline?(this.inlineStorage.has(t.hash)||this.inlineStorage.set(t.hash,new O(t,this.domLoader)),this.inlineStorage.get(t.hash)):(this.storage.has(t.src)||this.storage.set(t.src,t.contentType===E.Script?new x(t,this.domLoader):new k(t,this.domLoader)),this.storage.get(t.src))}},{key:"pushAsset",value:function(t){var e=t.target;if(e){var r;if(function(t){return"script"===t.tagName.toLowerCase()}(e)){if(!(r=e.getAttribute("src")))return}else{if(!function(t){return"link"===t.tagName.toLowerCase()}(e))return;if(!(r=e.getAttribute("href")))return}var n=this.storage.get(r);n&&("load"===t.type?n.emitLoad(e.exports):"error"===t.type&&n.emitError(new i({message:'Загрузка ассета завершилась с ошибкой "'.concat(n.src,'"'),domain:"mf-registry.browser.assets.assets-storage.push-asset"})))}}}]),t}();function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function P(t,e){if(t){if("string"==typeof t)return A(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(t,e):void 0}}function T(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||P(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}class F extends n{constructor({message:t,domain:e,details:r}){super({type:"TimeoutError",message:t,domain:e,details:r}),Object.setPrototypeOf(this,F.prototype),Error.captureStackTrace?Error.captureStackTrace(this,F):this.stack=(new Error).stack}}var I="asset:ready",B="asset:timeout",R=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3;o(this,t),this.defaultTimeout=e}var r;return c(t,[{key:"importInline",value:function(e){var r=e.contentType===E.Script?t.createInlineScriptElement(e):t.createInlineLinkElement(e);document.head.appendChild(r)}},{key:"import",value:(r=v(e().mark((function r(o,a){var s,u,c,f,l,h,p=this;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=function(t,e,r){if(r.type===B&&(s.dispatchEvent(r),l(!0),e(new F({message:"Failed to load asset ".concat(o.src),domain:"DOMAssetLoader.import"}))),"error"===r.type){var a,u,c,h=new n({message:"string"==typeof r.error?r.error:(null===(a=r.error)||void 0===a?void 0:a.message)||"Failed to load asset ".concat(o.src),type:"AssetLoadError",domain:"DOMAssetLoader.import"});null!==(u=r.error)&&void 0!==u&&u.name&&(h.name=r.error.name),null!==(c=r.error)&&void 0!==c&&c.stack&&(h.stack=r.error.stack),l(!0),e(h)}f?s.exports?(l(!1),t(s.exports)):(l(!0),e(new i({message:"Module has no exports ".concat(o.src),domain:"DOMAssetLoader.import"}))):(l(!1),t())},l=function(t){clearTimeout(c),s.onerror=null,f?s.removeEventListener(I,u):s.onload=null,t&&document.head.removeChild(s)},s=o.contentType===E.Script?t.createScriptElement(o):t.createLinkElement(o),f=S(o)&&o.hasExports,e.abrupt("return",new Promise((function(t,e){u=h.bind(null,t,e),s.onerror=u,f?s.addEventListener(I,u):s.onload=u,document.head.appendChild(s),c=setTimeout(u,a||p.defaultTimeout,new CustomEvent(B))})));case 5:case"end":return e.stop()}}),r)}))),function(t,e){return r.apply(this,arguments)})}],[{key:"createInlineScriptElement",value:function(t){var e=document.createElement("script");e.dataset.hash=t.hash;var r=document.createTextNode(t.content);if(e.append(r),t.props)for(var n=0,i=Object.entries(t.props);n<i.length;n++){var o=T(i[n],2),a=o[0],s=o[1];e.setAttribute(a,"string"==typeof s?s:"")}return e}},{key:"createScriptElement",value:function(t){var e=document.createElement("script");if(e.src=t.src,t.props)for(var r=0,n=Object.entries(t.props);r<n.length;r++){var i=T(n[r],2),o=i[0],a=i[1];e.setAttribute(o,"string"==typeof a?a:"")}return e}},{key:"createInlineLinkElement",value:function(t){var e=document.createElement("style");e.dataset.hash=t.hash;var r=document.createTextNode(t.content);if(e.append(r),t.props)for(var n=0,i=Object.entries(t.props);n<i.length;n++){var o=T(i[n],2),a=o[0],s=o[1];e.setAttribute(a,"string"==typeof s?s:"")}return e}},{key:"createLinkElement",value:function(t){var e=document.createElement("link");if(e.href=t.src,e.rel="stylesheet",e.type="text/css",t.props)for(var r=0,n=Object.entries(t.props);r<n.length;r++){var i=T(n[r],2),o=i[0],a=i[1];e.setAttribute(o,"string"==typeof a?a:"")}return e}}]),t}();function C(t,e,r){return C=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&h(i,r.prototype),i},C.apply(null,arguments)}function M(t){var e="function"==typeof Map?new Map:void 0;return M=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return C(t,arguments,m(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,t)},M(t)}class N extends n{constructor({message:t,domain:e,details:r}){super({type:"NotFoundError",message:t,domain:e,details:r}),Object.setPrototypeOf(this,N.prototype),Error.captureStackTrace?Error.captureStackTrace(this,N):this.stack=(new Error).stack}}var D="_cianMfRegistryManifest",U="_cianMfRegistry",G="_cianAssetsStorage",J="instance",Q="parameters",q=function(t){return t.UI="ui",t.API="api",t}({}),V=q.API;function $(t){if(!function(t){return t.type===q.UI}(t))throw new i({message:'Рантайм "'.concat(t.name,'" не является UI'),domain:"mf-registry.shared.runtime.helpers"})}function z(t){return H.apply(this,arguments)}function H(){return(H=v(e().mark((function t(r){var n,i,o,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Z(n=r.ownerDocument)&&!tt(r)){t.next=3;break}return t.abrupt("return");case 3:return i=new AbortController,o=Y(n,i.signal),a=W(r,i.signal),t.next=8,Promise.race([o,a]);case 8:i.abort();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(t,e){return K.apply(this,arguments)}function K(){return(K=v(e().mark((function t(r,n){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Z(r)){t.next=2;break}return t.abrupt("return");case 2:if(!n||!n.aborted){t.next=4;break}return t.abrupt("return",Promise.reject());case 4:return t.abrupt("return",new Promise((function(t,e){var i=function e(){Z(r)&&(r.removeEventListener("readystatechange",e),t())};r.addEventListener("readystatechange",i),n&&n.addEventListener("abort",(function(){r.removeEventListener("readystatechange",i),e()}))})));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function W(t,e){return X.apply(this,arguments)}function X(){return(X=v(e().mark((function t(r,n){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||!n.aborted){t.next=2;break}return t.abrupt("return",Promise.reject());case 2:return t.abrupt("return",new Promise((function(t,e){var i=new MutationObserver((function(){tt(r)&&(i.disconnect(),t())}));i.observe(r,{childList:!0}),n&&n.addEventListener("abort",(function(){i.disconnect(),e()}))})));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(t){return"interactive"===t.readyState||"complete"===t.readyState}function tt(t){for(var e=t;e;){if(e.nextSibling)return!0;e=e.parentNode}return!1}var et,rt=["name","image","runtime"],nt=[].concat(rt,[J]),it=[].concat(function(t){if(Array.isArray(t))return A(t)}(et=nt)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(et)||P(et)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[Q]),ot=function(t){p(h,t);var r,n,i,a,s,u=(a=h,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=m(a);if(s){var r=m(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return d(this,t)});function h(){var t;return o(this,h),f(l(t=u.call(this)),"isUpdatePending",!1),t.initialize(),t}return c(h,[{key:"enableUpdating",value:function(){}},{key:"instance",get:function(){return this._instance}},{key:"connectedCallback",value:(i=v(e().mark((function t(){var r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.runtimeEnsure(),t.next=3,z(this);case 3:return t.next=5,r;case 5:this.runtime=t.sent,this.enableUpdating();case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"attributeChangedCallback",value:function(t,e,r){if(this.isConnected){if(nt.includes(t))return this.requestUpdate();if(this._instance){var n=this._instance.customElement;if(null===r)return n.removeAttribute(t);n.setAttribute(t,r)}}}},{key:"reservedAttributes",get:function(){var t=this,e=Object.fromEntries(it.map((function(e){return[e,t.getAttribute(e)]})).filter((function(t){return null!==t[1]})));return function(t){var e=rt.filter((function(e){return!t[e]}));if(e.length>0)throw new N({message:"Отсутствует один или несколько обязательных параметров: ".concat(e.join(", ")),domain:"mf-registry.cdn.cian-mf-ui"})}(e),e}},{key:"initialize",value:function(){var t=this;this.updatePromise=new Promise((function(e){return t.enableUpdating=e})),this.requestUpdate()}},{key:"runtimeEnsure",value:(n=v(e().mark((function t(){var r,n,i,o,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.reservedAttributes,n=r.name,i=r.image,o=r.runtime,$(a=window[U].v1.microfrontendStrict(n).imageStrict(i).runtimeStrict(o)),t.abrupt("return",a.ensure());case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"requestUpdate",value:function(){this.updatePromise=this.enqueueUpdate()}},{key:"enqueueUpdate",value:(r=v(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isUpdatePending=!0,t.next=3,this.updatePromise;case 3:this.performUpdate();case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"performUpdate",value:function(){this.isUpdatePending&&this.update()}},{key:"update",value:function(){var t=this.reservedAttributes,e=t.instance,r=t.parameters,n=e?this.runtime.instanceStrict(e):this.runtime.newInstance();this._instance!==n&&(this._instance=n,this.setAttribute(J,n.id),1===this.children.length&&this.children[0]instanceof this.runtime.customElementConstructor&&this.children[0].getAttribute(J)===n.id||(this.innerHTML="",this.appendChild(n.customElement)),r&&n.customElement.setAttribute(Q,r))}}],[{key:"observedAttributes",get:function(){return it}}]),h}(M(HTMLElement));function at(t){return"cian-mf-ui-".concat(t.microfrontendName,"-").concat(t.imageVersion,"-").concat(t.runtimeName).replace(/(?:[^\x2D.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[^\uD800-\uDB7F][\uDC00-\uDFFF])/g,"_")}var st=function(){function t(){var e=this;o(this,t),this.promise=new Promise((function(t,r){e._resolve=t,e._reject=r}))}return c(t,[{key:"resolve",value:function(){return this._resolve.apply(this,arguments)}},{key:"reject",value:function(){return this._reject.apply(this,arguments)}},{key:"then",value:function(t,e){return this.promise.then(t,e)}},{key:"catch",value:function(t){return this.promise.catch(t)}},{key:"finally",value:function(t){return this.promise.finally(t)}}]),t}();function ut(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return ct(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ct(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ft=function(t){return t[t.Initial=0]="Initial",t[t.Loading=1]="Loading",t[t.Loaded=2]="Loaded",t[t.Failed=3]="Failed",t}({}),lt=function(){function t(e,r,n){o(this,t),f(this,"_status",ft.Initial),this.manifest=r,this.name=e,this.bundleAssets=n}var r;return c(t,[{key:"entry",get:function(){return this.manifest.entry}},{key:"globals",get:function(){return this.manifest.globals}},{key:"assets",get:function(){return this.manifest.assets}},{key:"status",get:function(){return this._status}},{key:"load",value:(r=v(e().mark((function t(){var r,n,i,o,a,s;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._status!==ft.Loaded){t.next=2;break}return t.abrupt("return",this.getAsset(this.manifest.entry,E.Script).exports);case 2:if(this._status!==ft.Loading){t.next=4;break}return t.abrupt("return",this.deferred);case 4:this._status=ft.Loading,this.deferred=new st,t.prev=6,r=[],this.manifest.globals,n=this.getAsset(this.manifest.entry,E.Script),r.push(n.load()),i=ut(this.manifest.assets||[]);try{for(i.s();!(o=i.n()).done;)a=o.value,(s=this.getAsset(a)).type===j.File?r.push(s.load()):s.load()}catch(t){i.e(t)}finally{i.f()}return t.next=15,Promise.all(r);case 15:return this._status=ft.Loaded,this.deferred.resolve(n.exports),t.abrupt("return",n.exports);case 20:if(t.prev=20,t.t0=t.catch(6),this._status=ft.Failed,!(t.t0 instanceof CustomEvent)){t.next=26;break}throw this.deferred.reject(t.t0.detail),t.t0.detail;case 26:throw this.deferred.reject(t.t0),t.t0;case 28:case"end":return t.stop()}}),t,this,[[6,20]])}))),function(){return r.apply(this,arguments)})},{key:"getAsset",value:function(t,e){var r=this.bundleAssets.getAsset(t);if(!r)throw new i({message:"Asset ".concat(t," of bundle ").concat(this.name," not found in manifest"),domain:"mf-registry.bundle.getAsset"});if(e&&e!==r.contentType)throw new i({message:"Asset ".concat(t," of bundle ").concat(this.name,' has invalid content type "').concat(r.contentType,'"'),domain:"mf-registry.bundle.getAsset"});return r}}]),t}(),ht=function(){function t(e,r){o(this,t),f(this,"assetsMap",new Map),this.assets=e,this.assetsStorage=r,this.addAssets()}return c(t,[{key:"getAsset",value:function(t){return this.assetsMap.get(t)}},{key:"addAssets",value:function(){for(var t=0,e=Object.entries(this.assets);t<e.length;t++){var r=T(e[t],2),n=r[0],i=r[1],o=this.assetsStorage.createAssetByManifest(i);this.assetsMap.set(n,o)}}}]),t}(),pt=function(){function t(e){o(this,t),f(this,"_bundles",new Map),this.assetsStorage=e}return c(t,[{key:"createBundle",value:function(t,e,r){if(this._bundles.has(t))return this._bundles.get(t);var n=new ht(r,this.assetsStorage),i=new lt(t,e,n);return this._bundles.set(t,i),i}},{key:"bundles",get:function(){return Object.fromEntries(this._bundles)}},{key:"bundle",value:function(t){return this._bundles.get(t)}}]),t}(),dt=function(t){return t[t.Initial=0]="Initial",t[t.BundleLoading=1]="BundleLoading",t[t.BundleLoadFailed=2]="BundleLoadFailed",t[t.BundleReady=3]="BundleReady",t[t.BuilderLoading=4]="BuilderLoading",t[t.BuilderFailed=5]="BuilderFailed",t[t.Ready=6]="Ready",t}({}),mt=function(){function t(e,r){o(this,t),f(this,"_status",dt.Initial),this.manifest=e,this.image=r}var r,n;return c(t,[{key:"status",get:function(){return this._status}},{key:"type",get:function(){return this.manifest.type}},{key:"name",get:function(){return this.manifest.name}},{key:"bundle",get:function(){return this.manifest.bundle}},{key:"runtimeBuilder",get:function(){return this._runtimeBuilder}},{key:"ensure",value:(n=v(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._status!==dt.Ready){t.next=2;break}return t.abrupt("return",this);case 2:if(this._status!==dt.BundleLoading){t.next=4;break}return t.abrupt("return",this.loadDeferred);case 4:if(this._status!==dt.BuilderLoading){t.next=6;break}return t.abrupt("return",this.loadDeferred);case 6:if(this._status!==dt.Initial&&this._status!==dt.BundleLoadFailed&&this._status!==dt.BuilderFailed){t.next=20;break}return this.loadDeferred=new st,this._status=dt.BundleLoading,t.prev=9,t.next=12,this.image.load(this);case 12:this.setupFn=t.sent,this._status=dt.BundleReady,t.next=20;break;case 16:throw t.prev=16,t.t0=t.catch(9),this._status=dt.BundleLoadFailed,t.t0;case 20:return this._status=dt.BuilderLoading,t.prev=21,t.next=24,this.loadBuilder();case 24:this.afterBuilderLoaded(),t.next=31;break;case 27:throw t.prev=27,t.t1=t.catch(21),this._status=dt.BuilderFailed,t.t1;case 31:return this._status=dt.Ready,this.loadDeferred.resolve(this),t.abrupt("return",this);case 34:case"end":return t.stop()}}),t,this,[[9,16],[21,27]])}))),function(){return n.apply(this,arguments)})},{key:"loadBuilder",value:(r=v(e().mark((function t(){var r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=this.setupFn())instanceof Promise)){t.next=7;break}return t.next=4,r;case 4:this._runtimeBuilder=t.sent,t.next=8;break;case 7:this._runtimeBuilder=r;case 8:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"afterBuilderLoaded",value:function(){}}]),t}();function yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var vt=function(t){p(s,t);var r,n,i,a=(n=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=m(n);if(i){var r=m(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return d(this,t)});function s(t,e,r){var n;return o(this,s),f(l(n=a.call(this,t,e)),"methods",new Map),n.context=r,n}return c(s,[{key:"type",get:function(){return q.API}},{key:"call",value:(r=v(e().mark((function t(r,n){var i,o,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.methods.get(r)){t.next=3;break}throw new N({message:"Метод ".concat(r," отсутствует в API Runtime (").concat(this.context.microfrontend.name,"#").concat(this.context.image.version,"#").concat(this.name,")"),domain:"mf-registry.browser.api-runtime.call"});case 3:if(!n){t.next=10;break}return a=JSON.parse(JSON.stringify(n)),t.next=7,i(a);case 7:o=t.sent,t.next=13;break;case 10:return t.next=12,i();case 12:o=t.sent;case 13:if(void 0!==o){t.next=15;break}return t.abrupt("return",void 0);case 15:return t.abrupt("return",JSON.parse(JSON.stringify(o)));case 16:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"afterBuilderLoaded",value:function(){var t,e=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return yt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(this.runtimeBuilder);try{for(e.s();!(t=e.n()).done;){var r=t.value,n=r.path,i=r.handler;this.methods.set(n,i)}}catch(t){e.e(t)}finally{e.f()}}}]),s}(mt),gt=function(){function t(e,r,n){o(this,t),this.id=e,this.tagName=r,this.context=n}return c(t,[{key:"customElement",get:function(){return this._customElement||(this._customElement=document.createElement(this.tagName),this._customElement.setAttribute(J,this.id)),this._customElement},set:function(t){if(this._customElement)throw new i({message:"Элемент уже установлен в экземпляре",domain:"mf-registry.browser.instance.ui",details:{image:this.context.image.version,runtime:this.context.runtime.name,id:this.id}});this._customElement=t}},{key:"destroy",value:function(){this._customElement=void 0}}]),t}();function bt(t){return t.toString(16).padStart(2,"0")}var wt=function(t){p(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=m(e);if(r){var i=m(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return d(this,t)});function i(t,e,r){var a;if(o(this,i),f(l(a=n.call(this,t,e)),"_instances",new Map),a.context=r,a.tagName=t.tagName,t.instances)for(var s=0,u=Object.values(t.instances);s<u.length;s++){var c=u[s];a.newInstance(c)}return a}return c(i,[{key:"type",get:function(){return q.UI}},{key:"instances",get:function(){return Object.fromEntries(this._instances)}},{key:"customElementConstructor",get:function(){return this._customElementConstructor}},{key:"instanceContext",get:function(){return{microfrontend:this.context.microfrontend,image:this.context.image,runtime:this}}},{key:"instance",value:function(t){return this._instances.get(t)}},{key:"instanceStrict",value:function(t){var e=this._instances.get(t);if(!e)throw new N({message:'Экземпляр "'.concat(t,'" не найден (').concat(this.context.microfrontend.name,"#").concat(this.context.image.version,"#").concat(this.name,")"),domain:"mf-registry.browser.ui-runtime"});return e}},{key:"newInstance",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id,e=void 0===t?function(){var t=new Uint8Array((arguments.length>0&&void 0!==arguments[0]?arguments[0]:8)/2);return window.crypto.getRandomValues(t),Array.from(t,bt).join("")}():t,r=new gt(e,this.tagName,this.instanceContext);return this._instances.set(r.id,r),r}},{key:"afterBuilderLoaded",value:function(){var t=this.runtimeBuilder.customElementConstructor;customElements.get(this.tagName)||(this._customElementConstructor=t,customElements.define(this.tagName,t))}}]),i}(mt);function kt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var xt=function(){function t(e,r,n){o(this,t),f(this,"_runtimes",new Map),this.manifest=e,this.context=n,this.bundleLoader=new pt(r);for(var i=0,a=Object.entries(e.bundles);i<a.length;i++){var s=T(a[i],2),u=s[0],c=s[1];this.bundleLoader.createBundle(u,c,e.assets)}for(var l=0,h=Object.values(e.runtimes);l<h.length;l++){var p=h[l];this.newRuntime(p)}}var r;return c(t,[{key:"microfrontend",get:function(){return this.context.microfrontend}},{key:"version",get:function(){return this.manifest.version}},{key:"assets",get:function(){return this.manifest.assets}},{key:"bundles",get:function(){return this.bundleLoader.bundles}},{key:"runtimes",get:function(){return Object.fromEntries(this._runtimes)}},{key:"runtimeContext",get:function(){return{microfrontend:this.context.microfrontend,image:this}}},{key:"runtime",value:function(t){return this._runtimes.get(t)}},{key:"runtimeStrict",value:function(t){var e=this.runtime(t);if(!e)throw new N({message:'Рантайм "'.concat(t,'" не найден в реестре (').concat(this.context.microfrontend.name,"#").concat(this.version,")"),domain:"mf-registry.browser.image.runtimeStrict"});return e}},{key:"newRuntime",value:function(t){var e;return this._runtimes.has(t.name)?e=this._runtimes.get(t.name):(e=t.type===q.API?new vt(t,this,this.runtimeContext):new wt(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({tagName:at({microfrontendName:this.context.microfrontend.name,imageVersion:this.version,runtimeName:t.name})},t),this,this.runtimeContext),this._runtimes.set(t.name,e)),e}},{key:"load",value:(r=v(e().mark((function t(r){var n,i,o,a,s;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.bundleLoader.bundle(r.bundle)){t.next=3;break}throw new N({message:'Бандл для рантайма "'.concat(r.name,'" не найден в реестре (').concat(this.context.microfrontend.name,"#").concat(this.version,")"),domain:"mf-registry.browser.image.load"});case 3:return t.next=5,n.load();case 5:if(!(i=t.sent).ui){t.next=16;break}o=0,a=Object.keys(i.ui);case 8:if(!(o<a.length)){t.next=16;break}if((s=a[o])!==r.name){t.next=12;break}return t.abrupt("continue",13);case 12:this.newRuntime({type:q.UI,name:s,bundle:n.name,tagName:at({microfrontendName:this.context.microfrontend.name,imageVersion:this.version,runtimeName:s})});case 13:o++,t.next=8;break;case 16:if(i.api&&r.name!==V&&this.newRuntime({type:q.API,name:V,bundle:n.name}),i[r.type]){t.next=19;break}throw new N({message:'В бандле для рантайма "'.concat(r.name,'" не найдены экспортируемые ресурсы (').concat(this.context.microfrontend.name,"#").concat(this.version,")"),domain:"mf-registry.browser.image.load"});case 19:if(r.type!==q.API){t.next=21;break}return t.abrupt("return",i.api);case 21:if(i.ui&&i.ui[r.name]){t.next=23;break}throw new N({message:'В бандле для рантайма "'.concat(r.name,'" не найдены экспортируемые ресурсы (').concat(this.context.microfrontend.name,"#").concat(this.version,")"),domain:"mf-registry.browser.image.load"});case 23:return t.abrupt("return",i.ui[r.name]);case 24:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}]),t}();function Ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var Et=function(){function t(e,r){var n=this;o(this,t);var i=e.images,a=void 0===i?{}:i,s=e.name;this.name=s,this.assetsStorage=r,this._images=new Map(Object.entries(a).map((function(t){var e=T(t,2),i=e[0],o=e[1];return[i,new xt(o,r,n.imageContext)]})))}return c(t,[{key:"images",get:function(){return Object.fromEntries(this._images)}},{key:"imageContext",get:function(){return{microfrontend:this}}},{key:"api",value:function(){for(var t=0,e=Object.values(this.images);t<e.length;t++){var r=e[t].runtime(V);if(r)return r}}},{key:"image",value:function(t){return this._images.get(t)}},{key:"imageStrict",value:function(t){var e=this.image(t);if(!e)throw new N({message:'Образ версии "'.concat(t,'" не найден в реестре (').concat(this.name,")"),domain:"mf-registry.browser.microfrontend"});return e}},{key:"newImage",value:function(t){var e=new xt(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({assets:{},bundles:{},runtimes:{}},t),this.assetsStorage,this.imageContext);return this._images.set(e.version,e),e}}]),t}();function jt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function St(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jt(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Lt=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;o(this,t);var i=r.microfrontends,a=void 0===i?{}:i;this.assetsStorage=n,this.microfrontends=new Map(Object.entries(a).map((function(t){var r=T(t,2),n=r[0],i=r[1];return[n,new Et(St(St({},i),{},{name:n}),e.assetsStorage)]})))}return c(t,[{key:"microfrontend",value:function(t){return this.microfrontends.get(t)}},{key:"microfrontendStrict",value:function(t){var e=this.microfrontend(t);if(!e)throw new N({message:'Микрофронтенд "'.concat(t,'" не найден в реестре'),domain:"mf-registry.browser.registry"});return e}},{key:"register",value:function(t){var e=this,r=t.microfrontendName,n=t.imageVersion,i=t.microfrontends,o=void 0===i?{}:i;return Object.entries(o).forEach((function(t){var r=T(t,2),n=r[0],i=r[1],o=e.microfrontend(n)||e.newMicrofrontend(St(St({},i),{},{name:n}));Object.entries(i.images||{}).forEach((function(t){var e=T(t,2),r=e[0],n=e[1],i=o.image(r)||o.newImage(St(St({},n),{},{version:r}));Object.entries(n.runtimes||{}).forEach((function(t){var e=T(t,2),r=e[0],n=e[1],o=i.runtime(r)||i.newRuntime(n);Object.entries(n.instances||{}).forEach((function(t){var e=T(t,2),r=e[0],n=e[1];o.type!==q.UI||o.instance(r)||o.newInstance(St(St({},n),{},{id:r}))}))}))}))})),this.microfrontendStrict(r).imageStrict(n)}},{key:"newMicrofrontend",value:function(t){var e=new Et(St({images:{}},t),this.assetsStorage);return this.microfrontends.set(e.name,e),e}}]),t}(),_t=e().mark(Tt);function At(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Pt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tt(t){var r,n,i,o,a,s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.images){e.next=15;break}r=0,n=Object.values(t.images);case 2:if(!(r<n.length)){e.next=15;break}i=n[r].assets,o=0,a=Object.values(i);case 5:if(!(o<a.length)){e.next=12;break}return s=a[o],e.next=9,s;case 9:o++,e.next=5;break;case 12:r++,e.next=2;break;case 15:case"end":return e.stop()}}),_t)}!function(){var t;if(null!==(t=window[U])&&void 0!==t&&t.v1)throw new i({message:"Реестр микрофронтендов уже инициализирован",domain:"mf-registry.cdn.init"});var e=function(t){if(window[G])return window[G];var e=new Map;if(null!=t&&t.microfrontends)for(var r=0,n=Object.values(t.microfrontends);r<n.length;r++){var i,o=At(Tt(n[r]));try{for(o.s();!(i=o.n()).done;){var a=i.value;a.type===j.File?e.set(a.src,a):e.set(a.hash,a)}}catch(t){o.e(t)}finally{o.f()}}var s=new R;return window[G]=new _(s,e.values()),window[G]}(window[D]);window[U]={v1:new Lt(window[D],e)},customElements.define("cian-mf-ui",ot)}()}()}();
//# sourceMappingURL=mf-registry.v1.js.map